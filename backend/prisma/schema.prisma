// Prisma Schema
// https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

// Database provider
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

/// Game round record
model Round {
  id        String   @id @default(cuid())
  createdAt DateTime @default(now())
  status    String   // CREATED | STARTED | REVEALED

  // Provably fair protocol
  nonce        String
  commitHex    String
  serverSeed   String?
  clientSeed   String
  combinedSeed String
  pegMapHash   String

  // Game parameters
  rows             Int
  dropColumn       Int
  binIndex         Int
  payoutMultiplier Float
  betCents         Int
  pathJson         String // JSON encoded path

  // Reveal timestamp
  revealedAt DateTime?

  @@index([status])
  @@index([createdAt])
}
